<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> - 首页</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="shortcut icon" href="assets/img/logo.jpg">
    <link href="assets/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="assets/css/animate.css" rel="stylesheet">
    <link href="assets/css/style.min.css?v=4.1.0" rel="stylesheet">
</head>

<body class="gray-bg">
<div class="row">
    <div class="col-sm-12">
        <div class="wrapper wrapper-content">
            <div class="row animated fadeInRight">
                <div class="col-sm-12">
                    <div class="ibox float-e-margins">
                        <div class="text-center float-e-margins p-md">
                            <h1>报表生成步骤</h1>
                        </div>
                        <div class="" id="ibox-content">

                            <div id="vertical-timeline" class="vertical-container light-timeline">
                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>数据源配置</h2>
                                        <p>数据源配置</p>
                                        <a href="javascript:void(0)" id="dataSourceConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>数据参数配置</h2>
                                        <p>数据参数配置</p>
                                        <a href="javascript:void(0)" id="dataParamConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>数据参数组配置</h2>
                                        <p>数据参数组配置</p>
                                        <a href="javascript:void(0)" id="dataParamGroupConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>数据集配置</h2>
                                        <p>数据集配置</p>
                                        <a href="javascript:void(0)" id="dataSetConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>模板配置</h2>
                                        <p>模板配置</p>
                                        <a href="javascript:void(0)" id="templateConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>组件类型配置</h2>
                                        <p>组件类型配置</p>
                                        <a href="javascript:void(0)" id="componentTypeConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>组件配置</h2>
                                        <p>组件配置</p>
                                        <a href="javascript:void(0)" id="componentConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>列组别配置</h2>
                                        <p>列组别配置</p>
                                        <a href="javascript:void(0)" id="columnConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>报表参数配置</h2>
                                        <p>报表参数配置</p>
                                        <a href="javascript:void(0)" id="reportParamConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>

                                <div class="vertical-timeline-block">
                                    <div class="vertical-timeline-icon lazur-bg">
                                        <i class="fa fa-user-md"></i>
                                    </div>

                                    <div class="vertical-timeline-content">
                                        <h2>报表配置</h2>
                                        <p>报表配置</p>
                                        <a href="javascript:void(0)" id="reportConfig" class="btn btn-sm btn-info J_menuItem">前往</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 全局js -->
<script src="assets/js/jquery.min.js?v=2.1.4"></script>
<script src="assets/js/bootstrap.min.js?v=3.3.6"></script>

<!-- 自定义js -->
<script src="assets/js/content.js?v=1.0.0"></script>
<script src="assets/common/PermissionUtils.js"></script>

<script>
    $(function () {
        init();
        function init(){
            console.log(parent.globalPermissions);
            if (!contain(parent.globalPermissions, 'dataSource:query')) {
                $("#dataSourceConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'dataParameter:query')) {
                $("#dataParamConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'dataParameterGroup:query')) {
                $("#dataParamGroupConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'dataList:query')) {
                $("#dataSetConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'cfgChartTemplate:query')) {
                $("#templateConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'cfgComponentType:query')) {
                $("#componentTypeConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'cfgComponent:query')) {
                $("#componentConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'cfgComponentColGroup:query')) {
                $("#columnConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'cfgParam:query')) {
                $("#reportParamConfig").hide();
            }
            if (!contain(parent.globalPermissions, 'cfgPage:query')) {
                $("#reportConfig").hide();
            }
        }

        function f(l) {
            var k = 0;
            $(l).each(function () {
                k += $(this).outerWidth(true)
            });
            return k
        }
        function g(n) {
            var o = f($(n).prevAll()),
                q = f($(n).nextAll());
            var l = f($(".content-tabs").children().not(".J_menuTabs"));
            var k = $(".content-tabs").outerWidth(true) - l;
            var p = 0;
            if ($(".page-tabs-content").outerWidth() < k) {
                p = 0
            } else {
                if (q <= (k - $(n).outerWidth(true) - $(n).next().outerWidth(true))) {
                    if ((k - $(n).next().outerWidth(true)) > q) {
                        p = o;
                        var m = n;
                        while ((p - $(m).outerWidth()) > ($(".page-tabs-content").outerWidth() - k)) {
                            p -= $(m).prev().outerWidth();
                            m = $(m).prev()
                        }
                    }
                } else {
                    if (o > (k - $(n).outerWidth(true) - $(n).prev().outerWidth(true))) {
                        p = o - $(n).prev().outerWidth(true)
                    }
                }
            }
            $(".page-tabs-content").animate({
                marginLeft: 0 - p + "px"
            }, "fast")
        }
        function a() {
            var o = Math.abs(parseInt($(".page-tabs-content").css("margin-left")));
            var l = f($(".content-tabs").children().not(".J_menuTabs"));
            var k = $(".content-tabs").outerWidth(true) - l;
            var p = 0;
            if ($(".page-tabs-content").width() < k) {
                return false
            } else {
                var m = $(".J_menuTab:first");
                var n = 0;
                while ((n + $(m).outerWidth(true)) <= o) {
                    n += $(m).outerWidth(true);
                    m = $(m).next()
                }
                n = 0;
                if (f($(m).prevAll()) > k) {
                    while ((n + $(m).outerWidth(true)) < (k) && m.length > 0) {
                        n += $(m).outerWidth(true);
                        m = $(m).prev()
                    }
                    p = f($(m).prevAll())
                }
            }
            $(".page-tabs-content").animate({
                marginLeft: 0 - p + "px"
            }, "fast")
        }
        function b() {
            var o = Math.abs(parseInt($(".page-tabs-content").css("margin-left")));
            var l = f($(".content-tabs").children().not(".J_menuTabs"));
            var k = $(".content-tabs").outerWidth(true) - l;
            var p = 0;
            if ($(".page-tabs-content").width() < k) {
                return false
            } else {
                var m = $(".J_menuTab:first");
                var n = 0;
                while ((n + $(m).outerWidth(true)) <= o) {
                    n += $(m).outerWidth(true);
                    m = $(m).next()
                }
                n = 0;
                while ((n + $(m).outerWidth(true)) < (k) && m.length > 0) {
                    n += $(m).outerWidth(true);
                    m = $(m).next()
                }
                p = f($(m).prevAll());
                if (p > 0) {
                    $(".page-tabs-content").animate({
                        marginLeft: 0 - p + "px"
                    }, "fast")
                }
            }
        }
        $(".J_menuItem").each(function (k) {
            if (!$(this).attr("data-index")) {
                $(this).attr("data-index", k)
            }
        });
        function c() {
            var o = $(this).attr("href"),
                m = $(this).data("index"),
                l = $.trim($(this).text()),
                i = $(this).attr("id"),
                k = true;
            if (o == undefined || $.trim(o).length == 0) {
                return false
            }
            $(".J_menuTab").each(function () {
                if ($(this).data("id") == o) {
                    if (!$(this).hasClass("active")) {
                        $(this).addClass("active").siblings(".J_menuTab").removeClass("active");
                        g(this);
                        $(".J_mainContent .J_iframe").each(function () {
                            if ($(this).data("id") == o) {
                                $(this).show().siblings(".J_iframe").hide();
                                return false
                            }
                        })
                    }
                    k = false;
                    return false
                }
            });
            if (k) {
                console.log(parent.globalPermissions);
                if(i == "dataSourceConfig" ){
                    l = "数据源";
                    o = "page/dataSource/index.html";
                }
                if(i == "dataParamConfig" ){
                    l = "数据参数";
                    o = "page/dataParameter/index.html";
                }
                if(i == "dataParamGroupConfig" ){
                    l = "数据参数组";
                    o = "page/dataParameterGroup/index.html";
                }

                if(i == "dataSetConfig" ){
                    l = "数据集";
                    o = "page/dataList/index.html";
                }
                if(i == "templateConfig" ){
                    l = "模板配置";
                    o = "page/cfgChartTemplate/index.html";
                }
                if(i == "componentTypeConfig" ){
                    l = "组件类型";
                    o = "page/cfgComponentType/index.html";
                }

                if(i == "componentConfig" ){
                    l = "组件配置";
                    o = "page/cfgComponent/index.html";
                }
                if(i == "columnConfig" ){
                    l = "列组别";
                    o = "page/cfgComponentColGroup/index.html";
                }
                if(i == "reportParamConfig" ){
                    l = "报表参数";
                    o = "page/cfgParam/index.html";
                }
                if(i == "reportConfig" ){
                    l = "报表配置";
                    o = "page/cfgPage/index.html";
                }

                var p = '<a href="javascript:;" class="active J_menuTab" data-id="' + o + '">' + l + ' <i class="fa fa-times-circle"></i></a>';
                $(".J_menuTab", parent.document).removeClass("active");
                var n = '<iframe class="J_iframe" name="iframe' + m + '" width="100%" height="100%" src="' + o + '" frameborder="0" data-id="' + o + '" seamless></iframe>';
                $(".J_mainContent", parent.document).find("iframe.J_iframe").hide().parents(".J_mainContent").append(n);
                $(".J_menuTabs .page-tabs-content", parent.document).append(p);
                g($(".J_menuTab.active", parent.document))
            }
            return false
        }
        $(".J_menuItem").on("click", c);
        function h() {
            var m = $(this).parents(".J_menuTab").data("id");
            var l = $(this).parents(".J_menuTab").width();
            if ($(this).parents(".J_menuTab").hasClass("active")) {
                if ($(this).parents(".J_menuTab").next(".J_menuTab").size()) {
                    var k = $(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").data("id");
                    $(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").addClass("active");
                    $(".J_mainContent .J_iframe").each(function () {
                        if ($(this).data("id") == k) {
                            $(this).show().siblings(".J_iframe").hide();
                            return false
                        }
                    });
                    var n = parseInt($(".page-tabs-content").css("margin-left"));
                    if (n < 0) {
                        $(".page-tabs-content").animate({
                            marginLeft: (n + l) + "px"
                        }, "fast")
                    }
                    $(this).parents(".J_menuTab").remove();
                    $(".J_mainContent .J_iframe").each(function () {
                        if ($(this).data("id") == m) {
                            $(this).remove();
                            return false
                        }
                    })
                }
                if ($(this).parents(".J_menuTab").prev(".J_menuTab").size()) {
                    var k = $(this).parents(".J_menuTab").prev(".J_menuTab:last").data("id");
                    $(this).parents(".J_menuTab").prev(".J_menuTab:last").addClass("active");
                    $(".J_mainContent .J_iframe").each(function () {
                        if ($(this).data("id") == k) {
                            $(this).show().siblings(".J_iframe").hide();
                            return false
                        }
                    });
                    $(this).parents(".J_menuTab").remove();
                    $(".J_mainContent .J_iframe").each(function () {
                        if ($(this).data("id") == m) {
                            $(this).remove();
                            return false
                        }
                    })
                }
            } else {
                $(this).parents(".J_menuTab").remove();
                $(".J_mainContent .J_iframe").each(function () {
                    if ($(this).data("id") == m) {
                        $(this).remove();
                        return false
                    }
                });
                g($(".J_menuTab.active"))
            }
            return false
        }
        $(".J_menuTabs").on("click", ".J_menuTab i", h);
        function i() {
            $(".page-tabs-content").children("[data-id]").not(":first").not(".active").each(function () {
                $('.J_iframe[data-id="' + $(this).data("id") + '"]').remove();
                $(this).remove()
            });
            $(".page-tabs-content").css("margin-left", "0")
        }
        $(".J_tabCloseOther").on("click", i);
        function j() {
            g($(".J_menuTab.active"))
        }
        $(".J_tabShowActive").on("click", j);
        function e() {
            if (!$(this).hasClass("active")) {
                var k = $(this).data("id");
                $(".J_mainContent .J_iframe").each(function () {
                    if ($(this).data("id") == k) {
                        $(this).show().siblings(".J_iframe").hide();
                        return false
                    }
                });
                $(this).addClass("active").siblings(".J_menuTab").removeClass("active");
                g(this)
            }
        }
        $(".J_menuTabs").on("click", ".J_menuTab", e);
        function d() {
            var l = $('.J_iframe[data-id="' + $(this).data("id") + '"]');
            var k = l.attr("src")
        }
        $(".J_menuTabs").on("dblclick", ".J_menuTab", d);
        $(".J_tabLeft").on("click", a);
        $(".J_tabRight").on("click", b);
        $(".J_tabCloseAll").on("click", function () {
            $(".page-tabs-content").children("[data-id]").not(":first").each(function () {
                $('.J_iframe[data-id="' + $(this).data("id") + '"]').remove();
                $(this).remove()
            });
            $(".page-tabs-content").children("[data-id]:first").each(function () {
                $('.J_iframe[data-id="' + $(this).data("id") + '"]').show();
                $(this).addClass("active")
            });
            $(".page-tabs-content").css("margin-left", "0")
        })
    });

</script>
</body>
</html>
